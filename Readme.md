
## Опис проєкту
Цей проєкт входить в набір прикладів взаємодії з API шлюзу безпечного обміну системи Трембіта (ШБО), що демонструють технічні особливості розробки вебсервісів та вебклієнтів, сумісних з системою Трембіта. 
Цей проєкт представляє собою сервіс на основі SOAP для управління даними про людей. Сервіс включає в себе створення, оновлення, видалення та отримання записів про людей в базі даних з використанням SQLAlchemy та Spyne.

## Вимоги

- Python 3.10 !!!
- MariaDB 11+
- Ubuntu Server 20.04+
- Git


## Структура проєкту

Проєкт складається з наступних файлів та директорій:

### Структура файлів і папок

```
project_root/
├── Dockerfile                                    # Файл для розгорнатя додатку у Докер
├── README.Docker.md                              # Документація
├── Readme.md                                     # Документація
├── alembic                                       # Службова директорія для керування моделями БД
├── alembic.ini                                   # Конфігураційний файл системи керування моделями БД Alembic
├── compose.yaml
├── config.ini                                    # Конфігураційний файл додатку
├── deploy.sh                                     # Скрипт автоматичного розгортання (спрощенний варіант)
├── deploy_by_gunicorn.sh                         # Скрипт автоматичного розгортання (продакшн варіант)
├── docs
│         ├── https_nginx_reverse_proxy.md        # Документація
│         ├── manual_installation.md              # Документація
│         └── script_installation.md              # Документація
├── gunicorn_config.py                            # Файл конфігурації WSGI сервера gunicorn. Використовується якщо додаток розгорнуто за допомогою deploy_by_gunicorn.sh
├── main.py                                       # Точка входу у додаток
├── models
│         ├── person.py                           # SQLAlchemy модель даних про людину
│         └── search.py                           # Модель параметрів пошуку.
├── remove.sh                                     # Скрипт автоматичного видалення
├── requirements.txt                              # Файл залежностей додатку
└── utils
    ├── answer_structure.py                       # Клас для структури відповіді.
    ├── config_utils.py                           # Утиліти для роботи з конфігураційними файлами та логуванням.
    ├── create_peson.py                           # Логіка створення нової персони в базі даних.
    ├── delete_person.py                          # Логіка видалення запису про людину за UNZR.
    ├── get_person.py                             # Логіка отримання даних про людину за параметрами.
    ├── logging_headers.py                        # Утиліти логування загогловків
    ├── update_person.py                          # Логіка оновлення даних про людину за UNZR
    └── validation.py                             # Утиліти валідації

```

### models

- `person.py`: Модель даних про людину з використанням SQLAlchemy та Spyne.
- `search.py`: Модель параметрів пошуку.

### utils

- `answer_structure.py`: Клас для структури відповіді.
- `config_utils.py`: Утиліти для роботи з конфігураційними файлами та логуванням.
- `create_person.py`: Логіка створення нової людини в базі даних.
- `delete_person.py`: Логіка видалення запису про людину за UNZR.
- `get_person.py`: Логіка отримання даних про людину за параметрами.
- `update_person.py`: Логіка оновлення даних про людину за UNZR.

## Розгортання

- Для ручного розгортання дивіться [тут](./docs/manual_installation.md).
- Для розгортання за допомогою скрипта дивіться [тут](./docs/script_installation.md).
- Для розгортання у Docker дивіться [тут](./docs/docker_installation.md).
- Для налаштування HTTPS зверніться до цієї інструкції [тут](./docs/https_nginx_reverse_proxy.md).

## Видалення
Ми додали скрипт `remove.sh` для автоматизації процесу видалення сервісу та очищення системи.
Скрипт працює лише у випадку якщо проєкт було розгорнуто також за допомогою скрипту автоматичного розгортання.

### Використання скрипта remove.sh

1. Зробіть файл виконуваним:

   ```bash
   chmod +x remove.sh
   ```

2. Запустіть скрипт:

   ```bash
   ./remove.sh
   ```

Скрипт автоматично зупинить та видалить системний сервіс, видалить віртуальне середовище, клонований репозиторій та системні залежності. 


## Внесок

Якщо ви хочете зробити свій внесок у проєкт, будь ласка, створіть форк репозиторію і відправте Pull Request.

## Ліцензія

Цей проект ліцензується відповідно до умов MIT License.

