
## Опис проєкту
Цей проєкт входить в набір прикладів взаємодії з API шлюзу безпечного обміну системи Трембіта (ШБО), що демонструють технічні особливості розробки вебсервісів та вебклієнтів, сумісних з системою Трембіта. 
Цей проєкт представляє собою сервіс на основі SOAP для управління даними про людей. Сервіс включає в себе створення, оновлення, видалення та отримання записів про людей в базі даних з використанням SQLAlchemy та Spyne.

## Вимоги

- Python 3.10 !!!
- MariaDB 11+
- Ubuntu Server 20.04+
- Git


## Структура проєкту

Проєкт складається з наступних файлів та директорій:

### Структура файлів і папок

```
project_root/
├── Dockerfile
├── README.Docker.md
├── Readme.md
├── alembic
├── alembic.ini
├── compose.yaml
├── config.ini
├── deploy.sh
├── deploy_by_gunicorn.sh
├── docs
│         ├── https_nginx_reverse_proxy.md
│         ├── manual_installation.md
│         └── script_installation.md
├── gunicorn_config.py
├── main.py
├── models
│         ├── person.py
│         └── search.py
├── remove.sh
├── requirements.txt
└── utils
    ├── answer_structure.py
    ├── config_utils.py
    ├── create_peson.py
    ├── delete_person.py
    ├── get_person.py
    ├── logging_headers.py
    ├── update_person.py
    └── validation.py

```

### models

- `person.py`: Модель даних про людину з використанням SQLAlchemy та Spyne.
- `search.py`: Модель параметрів пошуку.

### utils

- `answer_structure.py`: Клас для структури відповіді.
- `config_utils.py`: Утиліти для роботи з конфігураційними файлами та логуванням.
- `create_person.py`: Логіка створення нової людини в базі даних.
- `delete_person.py`: Логіка видалення запису про людину за UNZR.
- `get_person.py`: Логіка отримання даних про людину за параметрами.
- `update_person.py`: Логіка оновлення даних про людину за UNZR.

## Розгортання

- Для ручного розгортання дивіться [тут](./docs/manual_installation.md).
- Для розгортання за допомогою скрипта дивіться [тут](./docs/script_installation.md).
- Для розгортання у Docker дивіться [тут](./docs/docker_installation.md).
- Для налаштування HTTPS зверніться до цієї інструкції [тут](./docs/https_nginx_reverse_proxy.md).

## Видалення
Ми додали скрипт `remove.sh` для автоматизації процесу видалення сервісу та очищення системи.
Скрипт працює лише у випадку якщо проєкт було розгорнуто також за допомогою скрипту автоматичного розгортання.

### Використання скрипта remove.sh

1. Зробіть файл виконуваним:

   ```bash
   chmod +x remove.sh
   ```

2. Запустіть скрипт:

   ```bash
   ./remove.sh
   ```

Скрипт автоматично зупинить та видалить системний сервіс, видалить віртуальне середовище, клонований репозиторій та системні залежності. 


## Внесок

Якщо ви хочете зробити свій внесок у проєкт, будь ласка, створіть форк репозиторію і відправте Pull Request.

## Ліцензія

Цей проект ліцензується відповідно до умов MIT License.

